Rebasing Basics
---------------

When it comes time to integrate work from one branch into another we
have two choices: merging and rebasing.  Merging is the preferred way
to incorporate changes from a topic branch into the `master` branch.
Or more generally, from a descendant branch to an ancestor branch.

However, when moving commits in the opposite direction, that is from
an ancestor to a descendant it is often desirable to avoid the merge
commit generated by merging.  This can be accomplished with a rebase.

Keep in mind that rebasing comes with a cost.  Pay attention to the
warnings in this chapter.

### What is Rebasing? ###

When rebasing a topic branch (i.e. `feature`) onto an ancestor branch
(i.e. `master`):

  * A new commit history is created for `feature` so that it comes
    *after* all work on `master`

  * New commits are created, old commits are abandoned

  * Commits are created by *replaying* diffs on top of `master`

<div class="notes">

Note: commits that are abandoned due to a rebase stay in Git's data
store for around 30 days.  At which point they may be garbage
collected.

</div>

### Visualizing a Rebase ###

Before the rebase:

![](../../diagrams/branches/head.tex)\
<!-- Placeholder -->

After the rebase:

![](../../diagrams/rebasing/basic.tex)\
<!-- Placeholder -->

### A Word of Caution ###

While rebasing is completely safe, it can make things difficult if you
are not careful.

  * Rebasing published branches can lead duplicated commits for other
    team members

  * Best practice: Rebase before pushing commits to a remote branch

  * Each team member should work on their own branches

  * We'll talk about ways to fix things if you break these rules
